# Guide d'intÃ©gration - Catalogue iTakecare

Ce guide vous explique comment intÃ©grer le catalogue Leazr dans votre site iTakecare.

## ğŸš€ Installation

### 1. DÃ©pendances NPM requises

```bash
npm install @tanstack/react-query framer-motion lucide-react
```

### 2. DÃ©pendances shadcn/ui

Si vous n'avez pas dÃ©jÃ  shadcn/ui configurÃ© :

```bash
npx shadcn-ui@latest add button card badge input slider checkbox alert separator label textarea
```

## ğŸ“ Structure des fichiers

Copiez tous les fichiers `.txt` dans votre projet iTakecare :

```
src/
â”œâ”€â”€ catalog/
â”‚   â”œâ”€â”€ types-catalog.ts          # Types TypeScript
â”‚   â”œâ”€â”€ api-config.ts            # Configuration API
â”‚   â”œâ”€â”€ api-service.ts           # Service API Leazr
â”‚   â”œâ”€â”€ utils-pricing.ts         # Utilitaires prix
â”‚   â”œâ”€â”€ hooks-products.ts        # Hooks React Query
â”‚   â”œâ”€â”€ cart-context.tsx         # Contexte panier
â”‚   â”œâ”€â”€ company-context.tsx      # Contexte entreprise
â”‚   â”œâ”€â”€ hook-simplified-filter.tsx  # Hook filtres
â”‚   â”œâ”€â”€ navigation-bar-clean.tsx # Navigation
â”‚   â”œâ”€â”€ filter-bar-clean.tsx     # Barre de filtres
â”‚   â”œâ”€â”€ product-grid.tsx         # Grille produits
â”‚   â”œâ”€â”€ product-card.tsx         # Carte produit
â”‚   â”œâ”€â”€ catalog-page.tsx         # Page principale
â”‚   â””â”€â”€ cart-page.tsx            # Page panier
```

## âš™ï¸ Configuration

### 1. Configuration API (api-config.ts)

Modifiez les URLs pour pointer vers votre API Leazr :

```typescript
export const API_CONFIG = {
  BASE_URL: 'https://votre-api-leazr.com/api',  // Remplacez par votre URL
  ENDPOINTS: {
    CATALOG: '/catalog',
    PRODUCTS: '/products',
    // ... autres endpoints
  },
  
  // Ajoutez vos headers d'authentification si nÃ©cessaire
  HEADERS: {
    'Content-Type': 'application/json',
    'Accept': 'application/json',
    // 'Authorization': 'Bearer your-api-key',  // Si nÃ©cessaire
  },
};
```

### 2. Wrapper React Query

Dans votre App.tsx ou Ã  la racine :

```typescript
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import CatalogMain from './catalog/catalog-page';

const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 5 * 60 * 1000, // 5 minutes
      cacheTime: 10 * 60 * 1000, // 10 minutes
    },
  },
});

function App() {
  return (
    <QueryClientProvider client={queryClient}>
      {/* Votre contenu iTakecare existant */}
      
      {/* Catalogue intÃ©grÃ© */}
      <CatalogMain companySlug="votre-entreprise-slug" />
    </QueryClientProvider>
  );
}
```

## ğŸ”§ IntÃ©grations possibles

### Option 1 : Page dÃ©diÃ©e

```typescript
// pages/CatalogPage.tsx
import CatalogMain from '../catalog/catalog-page';

const CatalogPage = () => {
  return <CatalogMain companySlug="your-company-slug" />;
};
```

### Option 2 : Iframe intÃ©grÃ©e

```typescript
// Composant pour intÃ©grer dans une iframe
const CatalogIframe = () => {
  return (
    <div style={{ width: '100%', height: '100vh' }}>
      <CatalogMain companySlug="your-company-slug" />
    </div>
  );
};
```

### Option 3 : Modal/Dialog

```typescript
import { Dialog, DialogContent } from '@/components/ui/dialog';
import CatalogMain from '../catalog/catalog-page';

const CatalogModal = ({ isOpen, onClose }) => {
  return (
    <Dialog open={isOpen} onOpenChange={onClose}>
      <DialogContent className="max-w-7xl h-[90vh]">
        <CatalogMain 
          companySlug="your-company-slug"
          onProductSelect={(productId) => {
            // GÃ©rer la sÃ©lection de produit
            console.log('Product selected:', productId);
          }}
        />
      </DialogContent>
    </Dialog>
  );
};
```

## ğŸ¨ Personnalisation

### Styles

Le catalogue utilise Tailwind CSS et respecte les tokens de design. Pour personnaliser :

1. **Couleurs** : Modifiez les classes Tailwind dans les composants
2. **Logo entreprise** : Le logo est automatiquement rÃ©cupÃ©rÃ© depuis l'API
3. **ThÃ¨me** : Les couleurs primaires/secondaires sont appliquÃ©es automatiquement

### Comportements

```typescript
// Exemple de personnalisation
<CatalogMain 
  companySlug="your-company-slug"
  onProductSelect={(productId) => {
    // Redirection personnalisÃ©e
    window.location.href = `/product/${productId}`;
  }}
/>
```

## ğŸ“Š API Leazr - Endpoints attendus

Votre API Leazr doit exposer ces endpoints :

### GET /company/slug?slug={companySlug}
```json
{
  "id": "uuid",
  "name": "Nom entreprise",
  "slug": "company-slug",
  "logo_url": "https://...",
  "primary_color": "#3b82f6",
  "secondary_color": "#64748b"
}
```

### GET /catalog/public?company={companySlug}
```json
{
  "products": [...],
  "categories": [...],
  "brands": [...],
  "total": 150,
  "page": 1,
  "totalPages": 10
}
```

### GET /product/slug?company={companySlug}&slug={productSlug}
```json
{
  "id": "uuid",
  "name": "Product Name",
  "price": 100,
  "monthly_price": 25,
  "image_url": "https://...",
  "brand": "Brand Name",
  "category": "Category Name",
  "variants": [...],
  // ... autres propriÃ©tÃ©s
}
```

### POST /cart/submit
```json
{
  "company": "company-slug",
  "items": [...],
  "customerInfo": {...},
  "type": "quote|order"
}
```

## ğŸ” Test et Debug

### 1. VÃ©rification des appels API

Ouvrez les DevTools â†’ Network pour vÃ©rifier que les appels API sont corrects.

### 2. Ã‰tat du cache React Query

Installez React Query DevTools pour debug :

```bash
npm install @tanstack/react-query-devtools
```

```typescript
import { ReactQueryDevtools } from '@tanstack/react-query-devtools';

// Dans votre App.tsx
<ReactQueryDevtools initialIsOpen={false} />
```

### 3. Logs personnalisÃ©s

Le service API inclut des logs console. VÃ©rifiez la console pour les erreurs.

## ğŸš¨ Points d'attention

1. **CORS** : Assurez-vous que votre API Leazr accepte les requÃªtes depuis votre domaine iTakecare
2. **Authentication** : Configurez les headers d'auth dans `api-config.ts` si nÃ©cessaire
3. **Cache** : Les donnÃ©es sont mises en cache cÃ´tÃ© client pour les performances
4. **Responsive** : Tous les composants sont responsive par dÃ©faut
5. **Persistence panier** : Le panier est sauvegardÃ© en localStorage

## ğŸ¯ Prochaines Ã©tapes

1. Copiez les fichiers dans votre projet
2. Configurez l'API dans `api-config.ts`
3. Ajoutez le QueryClientProvider
4. Testez avec votre URL d'entreprise
5. Personnalisez selon vos besoins

## ğŸ†˜ Support

En cas de problÃ¨me :
1. VÃ©rifiez la configuration API
2. Regardez la console pour les erreurs
3. Testez les endpoints directement
4. VÃ©rifiez les dÃ©pendances NPM

Le catalogue est conÃ§u pour Ãªtre autonome et s'intÃ©grer facilement dans votre architecture existante.