// API Configuration for iTakecare Catalog - Supabase Integration
// Configure these settings for Supabase Edge Functions

export const SUPABASE_CONFIG = {
  // Supabase Edge Function endpoint
  EDGE_FUNCTION_NAME: 'catalog-api',
  
  // API endpoints for the catalog Edge Function
  ENDPOINTS: {
    PRODUCTS: 'products',
    CATEGORIES: 'categories',
    COMPANY: 'company',
    CUSTOMIZATIONS: 'customizations',
    BRANDS: 'brands',
  },
  
  // Headers for API requests
  HEADERS: {
    'Content-Type': 'application/json',
    'Accept': 'application/json',
  },
  
  // Your Leazr API key - required for authentication
  // Add this to your environment variables or configuration
  API_KEY: 'lzr_your_api_key_here', // Replace with your actual API key
};

// Helper to build Edge Function request parameters
export const buildEdgeFunctionCall = (
  companySlug: string, 
  endpoint: string, 
  params?: Record<string, string>
) => {
  // Build the path for the Edge Function
  const path = `v1/${companySlug}/${endpoint}`;
  
  // Build query parameters if provided
  const queryParams = params ? new URLSearchParams(params).toString() : '';
  const fullPath = queryParams ? `${path}?${queryParams}` : path;
  
  return {
    functionName: SUPABASE_CONFIG.EDGE_FUNCTION_NAME,
    body: {
      path: fullPath,
      method: 'GET',
      headers: {
        ...SUPABASE_CONFIG.HEADERS,
        'x-api-key': SUPABASE_CONFIG.API_KEY,
      },
    },
  };
};

// Helper to build POST request for Edge Function
export const buildEdgeFunctionPost = (
  companySlug: string,
  endpoint: string,
  data: any
) => {
  const path = `v1/${companySlug}/${endpoint}`;
  
  return {
    functionName: SUPABASE_CONFIG.EDGE_FUNCTION_NAME,
    body: {
      path,
      method: 'POST',
      headers: {
        ...SUPABASE_CONFIG.HEADERS,
        'x-api-key': SUPABASE_CONFIG.API_KEY,
      },
      body: data,
    },
  };
};